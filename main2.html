<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFC 13Y æ²–ç¹©å››æ—¥éŠè¡Œç¨‹ç¸½è¦½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Coastal Calm -->
    <!-- Application Structure Plan: A single-page vertical scrolling application with a sticky navigation bar for quick access to each day's itinerary. This structure is intuitive for a chronological plan. Each day is a separate section with events displayed as interactive cards. Cards for meals and lodging feature clickable tabs to switch between different options, reducing clutter and allowing for easy comparison. An overview section at the top summarizes key trip info and includes a budget chart for a quick visual summary. This design prioritizes clarity, ease of navigation, and interactive exploration over a static list. -->
    <!-- Visualization & Content Choices: Report Info: Trip schedule -> Goal: Organize/Inform -> Viz/Presentation: Interactive timeline cards with icons -> Interaction: Clickable tabs for options (e.g., dinner choices) to show/hide details -> Justification: Cleans UI, simplifies decision-making. Report Info: Budget (hypothetical) -> Goal: Inform -> Viz: Doughnut Chart -> Interaction: Hover for tooltips -> Justification: Provides a quick, high-level financial overview -> Library: Chart.js/Canvas. All location links are made interactive. This structure makes a text-heavy itinerary scannable and engaging. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #F8F7F4;
            color: #3D405B;
        }
        .nav-link {
            transition: all 0.3s;
        }
        .nav-link.active {
            color: #E07A5F;
            border-bottom: 2px solid #E07A5F;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            top: 2rem;
            left: -0.8rem; /* Mobile */
            width: 2px;
            height: calc(100% - 1rem);
            background-color: #81B29A;
        }
        .timeline-icon {
            position: absolute;
            left: -1.5rem; /* Mobile */
            top: 1.5rem;
            width: 2rem; /* Mobile */
            height: 2rem; /* Mobile */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #81B29A;
            color: white;
            z-index: 10;
        }
        .option-tab {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .option-tab.active {
            background-color: #81B29A;
            color: white;
            border-color: #81B29A;
        }
        .option-tab:not(.active) {
             background-color: #F4F1DE;
             color: #3D405B;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 640px) { /* sm breakpoint */
            .timeline-item::before {
                left: -1.05rem;
            }
            .timeline-icon {
                left: -2rem;
                width: 2.5rem;
                height: 2.5rem;
            }
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex flex-col">
                    <h1 class="text-2xl md:text-3xl font-bold text-[#3D405B]">TFC 13Y æ²–ç¹©ä¹‹æ—…</h1>
                    <p class="text-sm text-gray-500">å››å¤©ä¸‰å¤œï¼ŒåäººåŒè¡Œï¼Œä¸€å ´é›£å¿˜çš„å†’éšª</p>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#overview" class="nav-link text-lg font-medium text-gray-600 hover:text-[#E07A5F] pb-1">ç¸½è¦½</a>
                    <a href="#day1" class="nav-link text-lg font-medium text-gray-600 hover:text-[#E07A5F] pb-1">Day 1</a>
                    <a href="#day2" class="nav-link text-lg font-medium text-gray-600 hover:text-[#E07A5F] pb-1">Day 2</a>
                    <a href="#day3" class="nav-link text-lg font-medium text-gray-600 hover:text-[#E07A5F] pb-1">Day 3</a>
                    <a href="#day4" class="nav-link text-lg font-medium text-gray-600 hover:text-[#E07A5F] pb-1">Day 4</a>
                </nav>
            </div>
        </div>
    </header>
    
    <nav class="md:hidden bg-white/80 backdrop-blur-lg shadow-sm sticky top-[76px] z-30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-around py-2">
                <a href="#overview" class="nav-link text-sm font-medium text-gray-600 hover:text-[#E07A5F]">ç¸½è¦½</a>
                <a href="#day1" class="nav-link text-sm font-medium text-gray-600 hover:text-[#E07A5F]">Day 1</a>
                <a href="#day2" class="nav-link text-sm font-medium text-gray-600 hover:text-[#E07A5F]">Day 2</a>
                <a href="#day3" class="nav-link text-sm font-medium text-gray-600 hover:text-[#E07A5F]">Day 3</a>
                <a href="#day4" class="nav-link text-sm font-medium text-gray-600 hover:text-[#E07A5F]">Day 4</a>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <section id="overview" class="scroll-mt-32 mb-16">
            <h2 class="text-2xl sm:text-3xl font-bold text-[#E07A5F] border-b-2 border-[#F2CC8F] pb-2 mb-6">è¡Œç¨‹ç¸½è¦½</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-xl font-bold mb-4 text-[#3D405B]">é‡è¦è³‡è¨Š</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-2xl mr-4">âœˆï¸</span>
                            <div>
                                <h4 class="font-semibold">èˆªç­è³‡è¨Š</h4>
                                <p class="text-gray-600">æ¡ƒåœ’ (TPE) â‡„ æ²–ç¹©é‚£éœ¸ (OKA)</p>
                                <p class="text-sm text-gray-500">10/23 å‡ºç™¼: 06:50 - 09:20 | 10/26 è¿”ç¨‹: 16:55 - 17:35</p>
                            </div>
                        </div>
                         <div class="flex items-start">
                            <span class="text-2xl mr-4">ğŸš—</span>
                            <div>
                                <h4 class="font-semibold">ç§Ÿè»Šè³‡è¨Š</h4>
                                <p class="text-gray-600">æ²–ç¹©OTSç§Ÿè»Š (æ–‡å®‡å·²é è¨‚)</p>
                                <p class="text-sm text-gray-500">10/23 10:00 è‡³ 10/26 14:00</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <span class="text-2xl mr-4">ğŸ‘¥</span>
                            <div>
                                <h4 class="font-semibold">åŒè¡Œæ—…ä¼´ (10äºº)</h4>
                                <p class="text-gray-600">è¡Œæè¨—é‹ï¼šå† èã€éŸ‹æ™ºã€1+ã€æœ±æœ±</p>
                            </div>
                        </div>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col items-center">
                    <h3 class="text-xl font-bold mb-4 text-[#3D405B]">é ç®—åƒè€ƒï¼ˆæ—¥åœ“ï¼‰</h3>
                    <div class="chart-container">
                        <canvas id="budgetChart"></canvas>
                    </div>
                 </div>
            </div>
        </section>

        <div id="itinerary"></div>

    </main>
    
    <script>
        const itineraryData = {
            day1: {
                title: "åŒ—éƒ¨æ¢ç´¢ä¹‹æ—…",
                date: "10/23 (é€±å››)",
                events: [
                    { time: "06:50 - 09:20", title: "å‡ºç™¼", icon: "âœˆï¸", description: "æ¡ƒåœ’æ©Ÿå ´ â†’ æŠµé”æ²–ç¹©é‚£éœ¸æ©Ÿå ´", notes: "è¨˜å¾—æª¢æŸ¥è­·ç…§èˆ‡æ©Ÿç¥¨ï¼ éœ€è¦è¨—é‹çš„æœ‰ï¼šå† èã€éŸ‹æ™ºã€1+ã€æœ±æœ±ã€‚" },
                    { time: "09:30 - 11:30", title: "æ©Ÿå ´æ‰‹çºŒ & ç§Ÿè»Š", icon: "ğŸš—", description: "é ˜å–è¡Œæã€ç§Ÿè»Šã€‚", notes: "æ²–ç¹©OTSç§Ÿè»Š (10/23 10:00~10/26 14:00)ï¼Œæ–‡å®‡å·²é è¨‚ã€‚" },
                    { time: "11:30 - 14:00", title: "åˆé¤ & äº¤é€š", icon: "ğŸ½ï¸", description: "å‰å¾€ç³»æ»¿é­šå¸‚å ´äº«ç”¨åˆé¤ï¼Œéš¨å¾Œé©…è»Šå‰å¾€æ²–ç¹©åŒ—éƒ¨ã€‚", notes: "è»Šç¨‹ç´„ 1 å°æ™‚ 10 åˆ†é˜ã€‚åˆé¤å‚™æ¡ˆï¼šè¦è¦é£¯ (ç„¡æ³•é ç´„)ã€‚<br><a href='https://hanblog.tw/itoman-fish-center/' target='_blank' class='text-[#E07A5F] hover:underline'>ç³»æ»¿é­šå¸‚å ´ä»‹ç´¹</a>" },
                    { time: "14:00 - 17:00", title: "æ™¯é»éŠè¦½", icon: "ğŸï¸", description: "å¤å®‡åˆ©å³¶å‘¨é‚Šï¼ŒåŒ…å«å—åŒ—è§€æ™¯å°èˆ‡æµ·æ™¯å’–å•¡å»³ã€‚", notes: "ä¸‹åˆèŒ¶ï¼š<a href='https://slowlifeinokinawa.com/okicafe-fifiparlor/' target='_blank' class='text-[#E07A5F] hover:underline'>FIFI PARLOR</a>" },
                    { 
                        time: "18:00 - 19:00", title: "æ™šé¤æ™‚é–“", icon: "ğŸ¥˜", description: "æ™šé¤æœ‰å¤šå€‹é¸æ“‡ï¼Œè«‹é»é¸ä¸‹æ–¹æŒ‰éˆ•æŸ¥çœ‹ã€‚", 
                        options: {
                            'ç™¾å¹´å¤å®¶ å¤§å®¶': { name: "ç™¾å¹´å¤å®¶ å¤§å®¶ (é˜¿å¤è±¬)", link: "https://www.tablecheck.com/shops/ufuya/reserve", note: "é ç´„æ™‚æ®µ 17:30/18:00/19:30ï¼Œéœ€ç¢ºèªé ç´„ç‹€æ³ã€‚" },
                            'CHABU åè­·åº—': { name: "CHABU åè­·åº—", link: "https://okinawa.letsgojp.com/archives/757651/", note: "" },
                            'é³´å£°ä»¥å¤–': { name: "ã†ã¡ãªãƒ¼é£Ÿé“ é³´å£°ä»¥å¤–", link: "https://r.gnavi.co.jp/plan/sbv47hku0000/plan-reserve/inquiry/input/form/?sc_cid=gorp_header_reserve#", note: "é›¢æ°´æ—é¤¨10åˆ†é˜ã€‚" }
                        } 
                    },
                    { 
                        time: "19:00 -", title: "å…¥ä½ & è‡ªç”±æ™‚é–“", icon: "ğŸ¨", description: "å…¥ä½é£¯åº—å¾Œç‚ºè‡ªç”±æ™‚é–“ã€‚", 
                        options: {
                            'Four Season': { name: "Four Season Resort Kouri Island", link: "https://www.agoda.com/zh-hk/l/hotel/iheya-jp.html?checkIn=2025-10-23&los=1&Rooms=1&Adults=10&Childs=0&currency=TWD&origin=TW&cid=1922876", note: "10/18å‰å¯å…è²»å–æ¶ˆã€‚" },
                            'Mon Refuge': { name: "Mon Refuge Prive", link: "https://www.booking.com/hotel/jp/mon-refuge-prive-si-noyin-rejia.zh-tw.html?aid=2311236", note: "é è¿‘æ°´æ—é¤¨ï¼Œ10/9å‰å¯å…è²»å–æ¶ˆã€‚" }
                        },
                        notes: "æ™šä¸Šæ´»å‹•ï¼šæ—…é¤¨ç©éŠæˆ²ï¼Œè´å®¶éš”å¤©ç‡’è‚‰å…è²»ä»»é» (10000æ—¥åœ“å…§)ã€‚"
                    },
                    { time: "å®µå¤œ/é…’å§", title: "å¤œç”Ÿæ´»", icon: "ğŸ»", description: "å¯é¸æ“‡å‰å¾€å±…é…’å±‹æˆ–é…’å§ã€‚", notes: "å±…é…’å±‹åƒè€ƒï¼š<a href='https://maps.app.goo.gl/1PAx4h3yWZLeJ5Ju6' target='_blank' class='text-[#E07A5F] hover:underline'>è±šã¨å¯¿å¸ã®å³¶å±…é…’å±‹</a>" }
                ]
            },
            day2: {
                title: "æµ·æ´‹èˆ‡ç¾é£Ÿä¹‹æ—…",
                date: "10/24 (é€±äº”)",
                events: [
                    { time: "08:30 - 12:00", title: "ç¾éº—æµ·æ°´æ—é¤¨", icon: "ğŸ ", description: "æ¢ç´¢ç¥ç§˜çš„æµ·åº•ä¸–ç•Œã€‚", notes: "å¿…çœ‹ï¼š10:00-10:30 é¤µé£Ÿæµ·è±šæµ·é¾œï¼›10:30/11:30 æµ·è±šç§€ã€‚" },
                    { 
                        time: "12:00 - 14:00", title: "åˆé¤æ™‚é–“", icon: "ğŸœ", description: "æ°´æ—é¤¨å‘¨é‚Šæœ‰å¤šæ¨£åŒ–çš„åˆé¤é¸æ“‡ã€‚", 
                        options: {
                            'æµ·é‚¦ä¸¸': { name: "æµ·äººæ–™ç† æµ·é‚¦ä¸¸ (æµ·é®®å®šé£Ÿ)", link: "https://www.google.com/maps/place/%E6%B5%B7%E4%BA%BA%E6%96%99%E7%90%86+%E6%B5%B7%E9%82%A6%E4%B8%B8/@26.6875317,127.8745423,15.75z/data=!4m22!1m15!4m14!1m6!1m2!1s0x34e4fa3152619e3d:0xea08a6700fdd9ffe!2z5rKW57mp576O6bqX5rW35rC05peP6aSoIOaXpeacrOOAkjkwNS0wMjA2IE9raW5hd2EsIEt1bmlnYW1pIERpc3RyaWN0LCBNb3RvYnUsIElzaGlrYXdhLCA0MjQ!2m2!1d127.8780131!2d26.694338!1m6!1m2!1s0x34e4fbd207cf9a83:0x5e5c187da072999b!2z5rW35Lq65paZ55CGIOa1t-mCpuS4uCDml6XmnKzjgJI5MDUtMDIwNSBPa2luYXdhLCBLdW5pZ2FtaSBEaXN0cmljdCwgTW90b2J1LCBZYW1hZ2F3YSwgMTQyMS0x!2m2!1d127.8836417!2d26.682195!3m5!1s0x34e4fbd207cf9a83:0x5e5c187da072999b!8m2!3d26.682195!4d127.8836417!16s%2Fg%2F1td0w6nl", note: "" },
                            'å²¸æœ¬é£Ÿå ‚': { name: "å²¸æœ¬é£Ÿå ‚ (ç™¾å¹´æ²–ç¹©éºµ)", link: "https://www.google.com/maps/place/%E5%B2%B8%E6%9C%AC%E9%A3%9F%E5%A0%82/@26.6761861,127.8660123,14z/data=!4m23!1m15!4m14!1m6!1m2!1s0x34e4fa3152619e3d:0xea08a6700fdd9ffe!2z5rKW57mp576O6bqX5rW35rC05peP6aSoIOaXpeacrOOAkjkwNS0wMjA2IE9raW5hd2EsIEt1bmlnYW1pIERpc3RyaWN0LCBNb3RvYnUsIElzaGlrYXdhLCA0MjQ!2m2!1d127.8780131!2d26.694338!1m6!1m2!1s0x34e4f95eb431867d:0x1653b48af7640a31!2z5bK45pys6aOf5aCCIOaXpeacrOOAkjkwNS0wMjE0IE9raW5hd2EsIEt1bmlnYW1pIERpc3RyaWN0LCBNb3RvYnUsIOacrOmDqOeUulRvZ3VjaGksIDU!2m2!1d127.8958949!2d26.6603253!3m6!1s0x34e4f95eb431867d:0x1653b48af7640a31!8m2!3d26.6603253!4d127.8958949!10e9!16s%2Fg%2F1tfn0h3y", note: "" },
                            'å³¶è±šå®¶': { name: "å³¶è±šå®¶ (é™é‡ç‚™çƒ¤å³¶è±¬éºµ)", link: "https://www.google.com/maps/place/Island+Pig+House/@26.6900872,127.8785653,15.75z/data=!3m1!5s0x34e4fa331411ea83:0xa075f02c5f1d5747!4m23!1m15!4m14!1m6!1m2!1s0x34e4fa3152619e3d:0xea08a6700fdd9ffe!2z5rKW57mp576O6bqX5rW35rC05peP6aSoIOaXpeacrOOAkjkwNS0wMjA2IE9raW5hd2EsIEt1bmlnYW1pIERpc3RyaWN0LCBNb3RvYnUsIElzaGlrYXdhLCA0MjQ!2m2!1d127.8780131!2d26.694338!1m6!1m2!1s0x34e4f95cc7f9bf7f:0xb37a97d151c8e3c0!2zSXNsYW5kIFBpZyBIb3VzZSwgNDc555Wq5ZywIFRveW9oYXJhLCBNb3RvYnUsIEt1bmlnYW1pIERpc3RyaWN0LCBPa2luYXdhIDkwNS0wMjA05pel5pys!2m2!1d127.8921072!2d26.6901511!3m6!1s0x34e4f95cc7f9bf7f:0xb37a97d151c8e3c0!8m2!3d26.6901511!4d127.8921072!10e9!16s%2Fg%2F1tj875cl", note: "æ¯æ—¥é™é‡50ç¢—ã€‚" }
                        }
                    },
                    { time: "ä¸‹åˆ", title: "ä¸­éƒ¨æ™¯é»éŠè¦½", icon: "ğŸ—ºï¸", description: "è¡Œç¨‹å¾…å®šï¼Œå¯å½ˆæ€§å®‰æ’ã€‚", notes: "" },
                    { time: "æ™šä¸Š", title: "æ™šé¤ï¼šç‡’è‚‰ï¼", icon: "ğŸ¥©", description: "ç‰çƒã®ç‰› æ©ç´åº—ï¼Œå·²åˆ†æ‰¹é ç´„ã€‚", notes: "é è¨ˆ 20:00ã€‚é ç´„ç¢¼ï¼š9A77JL, ECST64, YDFWSKã€‚<br><a href='https://www.u-shi.net/onna.html' target='_blank' class='text-[#E07A5F] hover:underline'>å®˜æ–¹ç¶²ç«™</a>" },
                    { 
                        time: "æ™šä¸Š", title: "å…¥ä½ & ä¼‘æ¯", icon: "ğŸ¡", description: "å…¥ä½ä¸­éƒ¨åœ°å€çš„ä½å®¿ã€‚", 
                        options: {
                            'ç™½C': { name: "ç™½C (Airbnb)", link: "https://www.airbnb.com.tw/rooms/846846699079461432", note: "10äºº, 17,000$, 22é»å¾Œéœ€é™ä½éŸ³é‡ã€‚" },
                            'TERRACE': { name: "TERRACE GARDEN OKINAWA", link: "https://www.agoda.com/terrace-garden-okinawa-h10943499/hotel/okinawa-main-island-jp.html", note: "9/12å‰å¯å…è²»å–æ¶ˆã€‚" }
                        }
                    }
                ]
            },
            day3: {
                title: "å‹•æ„Ÿèˆ‡æ‚ é–’ä¹‹æ—…",
                date: "10/25 (é€±å…­)",
                events: [
                    { time: "ä¸Šåˆ", title: "æ°´ä¸Šæ´»å‹•ï¼šæµ®æ½›", icon: "ğŸ¤¿", description: "å‰å¾€æ²–ç¹©è— (é’ä¹‹æ´çªŸ) é«”é©—æµ®æ½›ã€‚", notes: "æ™‚é–“ï¼š08:00 - 10:00ï¼Œæ–‡å®‡å·²é è¨‚ã€‚" },
                    { time: "ä¸­åˆ", title: "åˆé¤æ™‚é–“", icon: "ğŸ½ï¸", description: "åœ°é»å¾…å®šï¼Œå¯ä¾æ“šæµ®æ½›å¾Œçš„åœ°é»æ±ºå®šã€‚", notes: "" },
                    { time: "ä¸‹åˆ", title: "å—éƒ¨æ™¯é»éŠè¦½", icon: "ğŸ›ï¸", description: "è¡Œç¨‹å¾…å®šï¼Œå¯å½ˆæ€§å®‰æ’ã€‚", notes: "" },
                    { time: "æ™šä¸Š", title: "å¸‚å€æ¢ç´¢ï¼šåœ‹éš›é€š", icon: "ğŸ›ï¸", description: "è‡ªç”±æ´»å‹•ï¼Œæ™šé¤å¯åœ¨æ­¤è§£æ±ºã€‚", notes: "æ™šé¤é¸é …ï¼š<a href='https://autoreserve.com/zh-hk/restaurants/W2w2Ro8TcnG5hVNxXw4P' target='_blank' class='text-[#E07A5F] hover:underline'>è‚‰çš„è®Šæ…‹é›†åœ˜</a> (å¯é ç´„ 17:00 / 20:00)ã€‚<br>é»å¿ƒï¼šblue sea å†°åº—ã€‚å¯è€ƒæ…®é€›ç¾åœ‹æ‘ã€‚" },
                    { time: "æ™šä¸Š", title: "å…¥ä½ & ä¼‘æ¯", icon: "ğŸ¨", description: "Naha Miharanosato -SEVEN Hotels and Resorts", notes: "10/11å‰å¯å…è²»å–æ¶ˆã€‚<br><a href='https://www.agoda.com/zh-tw/naha-miharanosato-seven-hotels-and-resorts/hotel/okinawa-main-island-jp.html' target='_blank' class='text-[#E07A5F] hover:underline'>è¨‚æˆ¿é€£çµ</a>" }
                ]
            },
            day4: {
                title: "è³¼ç‰©èˆ‡æ­¸é€”",
                date: "10/26 (é€±æ—¥)",
                events: [
                    { time: "æ—©ä¸Š", title: "æœ€å¾Œå·¡ç¦®", icon: "ğŸï¸", description: "å¯é¸æ“‡å‰å¾€ç€¨é•·å³¶æˆ–åœ¨åœ‹éš›é€šç¹¼çºŒè³¼ç‰©ã€‚", notes: "ç€¨é•·å³¶å‡æ—¥å¯èƒ½å®¹æ˜“å¡è»Šï¼Œéœ€æ³¨æ„äº¤é€šæ™‚é–“ã€‚" },
                    { time: "ä¸­åˆ", title: "åˆé¤ & é€›è¡—", icon: "ğŸ", description: "åœ¨åœ‹éš›é€šäº«ç”¨åˆé¤ä¸¦é€²è¡Œæœ€å¾Œçš„æ¡è³¼ã€‚", notes: "" },
                    { time: "ä¸‹åˆ", title: "å‰å¾€æ©Ÿå ´", icon: "ğŸš—", description: "æº–å‚™é‚„è»Šä¸¦è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚", notes: "è¨˜å¾—é ç•™å……è¶³æ™‚é–“ã€‚" },
                    { time: "16:55 - 17:35", title: "è¿”ç¨‹", icon: "âœˆï¸", description: "æ²–ç¹©é‚£éœ¸æ©Ÿå ´ â†’ æŠµé”æ¡ƒåœ’åœ‹éš›æ©Ÿå ´", notes: "æ»¿è¼‰è€Œæ­¸ï¼" }
                ]
            }
        };

        const itineraryContainer = document.getElementById('itinerary');
        Object.keys(itineraryData).forEach(dayKey => {
            const dayData = itineraryData[dayKey];
            const section = document.createElement('section');
            section.id = dayKey;
            section.className = "scroll-mt-32 mb-12";
            
            let eventsHtml = '';
            dayData.events.forEach((event, index) => {
                let optionsHtml = '';
                if (event.options) {
                    const optionKeys = Object.keys(event.options);
                    const tabsHtml = optionKeys.map((key, i) => `<button class="option-tab ${i === 0 ? 'active' : ''}" data-target="${dayKey}-event${index}-option${i}">${key}</button>`).join('');
                    const contentsHtml = optionKeys.map((key, i) => {
                        const option = event.options[key];
                        return `<div id="${dayKey}-event${index}-option${i}" class="option-content ${i > 0 ? 'hidden' : ''} mt-4 p-4 bg-gray-50 rounded-lg">
                                    <h5 class="font-semibold">${option.name}</h5>
                                    ${option.note ? `<p class="text-sm text-gray-600 mt-1">${option.note}</p>` : ''}
                                    ${option.link ? `<a href="${option.link}" target="_blank" class="text-sm text-[#E07A5F] hover:underline mt-2 inline-block">æŸ¥çœ‹è©³æƒ… &rarr;</a>` : ''}
                                </div>`;
                    }).join('');
                    optionsHtml = `<div class="mt-4">
                                     <div class="flex flex-wrap gap-2">${tabsHtml}</div>
                                     <div>${contentsHtml}</div>
                                 </div>`;
                }
                
                eventsHtml += `
                    <div class="timeline-item relative pl-6 sm:pl-8 pb-8">
                        <div class="timeline-icon text-base sm:text-xl">${event.icon}</div>
                        <p class="text-sm font-medium text-[#E07A5F]">${event.time}</p>
                        <h4 class="text-lg sm:text-xl font-bold mt-1 text-[#3D405B]">${event.title}</h4>
                        <p class="text-gray-700 mt-2">${event.description}</p>
                        ${event.notes ? `<div class="mt-2 text-sm text-gray-500 bg-[#F4F1DE]/60 p-3 rounded-md">${event.notes}</div>` : ''}
                        ${optionsHtml}
                    </div>
                `;
            });

            section.innerHTML = `
                <div class="flex items-baseline mb-6">
                     <h2 class="text-2xl sm:text-3xl font-bold text-[#E07A5F] mr-4">Day ${dayKey.slice(-1)}</h2>
                     <p class="text-lg sm:text-xl font-medium text-gray-500">${dayData.date} - ${dayData.title}</p>
                </div>
                <div class="relative">${eventsHtml}</div>
            `;
            itineraryContainer.appendChild(section);
        });

        itineraryContainer.addEventListener('click', function(e) {
            if (e.target.classList.contains('option-tab')) {
                const targetId = e.target.dataset.target;
                
                const parent = e.target.closest('.timeline-item');
                parent.querySelectorAll('.option-tab').forEach(tab => tab.classList.remove('active'));
                e.target.classList.add('active');

                parent.querySelectorAll('.option-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(targetId).classList.remove('hidden');
            }
        });
        
        const sections = document.querySelectorAll('section');
        const navLinks = document.querySelectorAll('.nav-link');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: "-50% 0px -50% 0px" });

        sections.forEach(section => {
            observer.observe(section);
        });

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector(link.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        const ctx = document.getElementById('budgetChart').getContext('2d');
        const budgetChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['ä½å®¿', 'äº¤é€š', 'é¤é£²', 'æ´»å‹• & é–€ç¥¨', 'è³¼ç‰© & å…¶ä»–'],
                datasets: [{
                    label: 'é ç®—åˆ†é…',
                    data: [35000, 25000, 20000, 15000, 10000],
                    backgroundColor: [
                        '#3D405B',
                        '#81B29A',
                        '#E07A5F',
                        '#F2CC8F',
                        '#F4F1DE'
                    ],
                    borderColor: '#F8F7F4',
                    borderWidth: 4,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                family: "'Inter', 'Noto Sans TC', sans-serif"
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed !== null) {
                                    label += new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY' }).format(context.parsed);
                                }
                                return label;
                            }
                        }
                    }
                },
                cutout: '60%'
            }
        });

    </script>
</body>
</html>

